const ctx = document.getElementById("sensorChart").getContext("2d");
const data = {
  labels: Array.from({ length: 24 }, (_, i) => `${i}`), // Gere rótulos de "0" a "23"
  datasets: [
    {
      label: "Temperatura",
      data: [], // Inicialize os dados do gráfico com um array vazio
      borderColor: "red",
      backgroundColor: "rgba(255, 0, 0, 0.2)",
    },
    {
      label: "Umidade",
      data: [], // Inicialize os dados do gráfico com um array vazio
      borderColor: "blue",
      backgroundColor: "rgba(0, 0, 255, 0.2)",
    },
  ],
};
const config = {
  type: "line",
  data: data,
};

// Inicializa o gráfico
new Chart(ctx, config);

// Cria um loop assíncrono que atualiza o gráfico a cada 60 minutos
setInterval(() => {
  // Atualiza os dados do gráfico
  const newData = formattedData.filter((entry) => entry.hour >= new Date().getHours());
  data.datasets[0].data = newData.map((entry) => entry.temperatura);
  data.datasets[1].data = newData.map((entry) => entry.umidade);

  // Atualiza o gráfico
  new Chart(ctx, config);
}, 60 * 1000);
